Spreadsheets -- Construction Site
============

This section describes

format of the Spreadsheets

sheet names


API v3
======

The Read the Docs API uses :abbr:`REST (Representational State Transfer)`.
JSON is returned by all API responses including errors
and HTTP response status codes are to designate success and failure.

.. contents:: Table of contents
   :local:
   :backlinks: none
   :depth: 3


Authentication and authorization
--------------------------------

Requests to the Read the Docs public API are for public and private information.
All endpoints require authentication.


Token
~~~~~

The ``Authorization`` HTTP header can be specified with ``Token <your-access-token>``
to authenticate as a user and have the same permissions that the user itself.


.. tabs::

  .. tab:: |org_brand|

     .. note::

        On |org_brand|, you will find your access Token under
        `your profile settings <https://readthedocs.org/accounts/tokens/>`__.

  .. tab:: |com_brand|

     .. note::

        On |com_brand|, you will find your access Token under
        `your profile settings <https://readthedocs.com/accounts/tokens/>`__.


Session
~~~~~~~

.. warning::

   Authentication via session is not enabled yet.

Session authentication is allowed on very specific endpoints,
to allow hitting the API when reading documentation.

When a user is trying to authenticate via session,
:abbr:`CSRF (Cross-site request forgery)` check is performed.


Resources
---------

This section shows all the resources that are currently available in APIv3.
There are some URL attributes that applies to all of these resources:

:?fields=:

   Specify which fields are going to be returned in the response.

:?omit=:

   Specify which fields are going to be omitted from the response.

:?expand=:

   Some resources allow to expand/add extra fields on their responses (see `Project details <#project-details>`__ for example).


.. tabs::

   .. tab:: |org_brand|

      .. tip::

         You can browse the full API by accessing its root URL: https://readthedocs.org/api/v3/

   .. tab:: |com_brand|

      .. tip::

         You can browse the full API by accessing its root URL: https://readthedocs.com/api/v3/


.. note::

   If you are using :doc:`Read the Docs for Business </commercial/index>` take into account that you will need to replace
   https://readthedocs.org/ by https://readthedocs.com/ in all the URLs used in the following examples.


Projects
~~~~~~~~

Projects list
+++++++++++++

.. http:get:: /api/v3/projects/

    Retrieve a list of all the projects for the current logged in user.

    **Example request**:

    .. tabs::

        .. code-tab:: bash

            $ curl -H "Authorization: Token <token>" https://readthedocs.org/api/v3/projects/

        .. code-tab:: python

            import requests
            URL = 'https://readthedocs.org/api/v3/projects/'
            TOKEN = '<token>'
            HEADERS = {'Authorization': f'token {TOKEN}'}
            response = requests.get(URL, headers=HEADERS)
            print(response.json())

    **Example response**:

    .. sourcecode:: json

        {
            "count": 25,
            "next": "/api/v3/projects/?limit=10&offset=10",
            "previous": null,
            "results": [{
                    "url": "https://github.com/pypa/pip",
                    "type": "git"
                },
                "translation_of": null,
                "urls": {
                    "documentation": "http://pip.pypa.io/en/stable/",
                    "home": "https://pip.pypa.io/"
                },
                "_links": {
                    "_self": "/api/v3/projects/pip/",
                    "versions": "/api/v3/projects/pip/versions/",
                }
            }]
        }

    :query string language: language code as ``en``, ``es``, ``ru``, etc.
    :query string programming_language: programming language code as ``py``, ``js``, etc.

    The ``results`` in response is an array of project data,
    which is same as :http:get:`/api/v3/projects/(string:project_slug)/`.

    .. note::

       .. FIXME: we can't use :query string: here because it doesn't render properly

      :doc:`Read the Docs for Business </commercial/index>`, also accepts

      :Query Parameters:

         * **expand** (*string*) -- with ``organization`` and ``teams``.



column names




field configuration


Build environment
-----------------

The *Sphinx* and *Mkdocs* builders set the following RTD-specific environment variables when building your documentation:

.. csv-table:: Environment Variables
   :header: Environment variable, Description, Example value
   :widths: 15, 10, 30

   ``READTHEDOCS``, Whether the build is running inside RTD, ``True``
   ``READTHEDOCS_VERSION``, The RTD name of the version which is being built, ``latest``
   ``READTHEDOCS_PROJECT``, The RTD slug of the project which is being built, ``my-example-project``
   ``READTHEDOCS_LANGUAGE``, The RTD language slug of the project which is being built, ``en``


.. tip::

   In case extra environment variables are needed to the build process (like secrets, tokens, etc),
   you can add them going to :guilabel:`Admin` > :guilabel:`Environment Variables` in your project.
   See :doc:`guides/environment-variables`.
